FROM alpine:3.17.3

# Instala o bash
RUN apk add --no-cache bash

# Remove o link simb처lico para o shell padr찾o e cria um novo link simb처lico para o bash
RUN rm /bin/sh && ln -s /bin/bash /bin/sh

# Define o shell padr찾o como bash
SHELL ["/bin/bash", "-c"]

# crypto++ is in edge/community
RUN apk add --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community/ \
  boost-iostreams \
  boost-system \
  crypto++ \
  fmt \
  luajit \
  mariadb-connector-c \
  pugixml

USER container
ENV USER container
ENV HOME /home/container
ENV SHELL /bin/bash

WORKDIR /home/container

COPY ./entrypoint.sh /entrypoint.sh

CMD [ "bash", "/entrypoint.sh" ]
